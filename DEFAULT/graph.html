<html>

<head>
    <meta charset="utf-8">
    <script src="js/ajax.js"></script>
    <script src="js/graph.js"></script>
    <link rel="stylesheet" href="css/graph.css">
</head>

<body>

<div class="graph_explain_box">
    <p>
        This graph shows the history of De Verrekijker's open times.
        Hover segments with your mouse for details.
        Green means open, grey means closed, and empty bits are missing data.
        At the top is today, at the bottom is a long time ago.
    </p>
</div>


<div id="bordercontainer">
    <div id="b1" class="yalign border">06:00</div>
    <div id="b2" class="yalign border">12:00</div>
    <div id="b3" class="yalign border">18:00</div>
</div>
<div class='viscontainer' id="vis-container">

</div>
<script>
    request(
        '/open-state/get_coordinates.php',
        'get',
        null,
        function (server_response) {
            const data = JSON.parse(server_response);
            if (data['error'] === 'error') console.log('Server reported error:', data['error']);
            else {
                init_ts = data.shift();
                init_date = new Date(init_ts * 1000);
                visualize(data);
            }
        });
</script>
</body>

</html>
